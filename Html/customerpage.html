<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Browse Books</title>
    <link rel="stylesheet" href="/Css/customerpage.css">
    <script src="https://kit.fontawesome.com/33e495fb35.js" crossorigin="anonymous"></script>

</head>
<body>
<nav>
    <ul>
        <li><a id="nav" href="#" class="option"></a></li>
        <li><a id="nav0" href="#" class="option">BOOK STORE</a></li>
        <li><a id="nav1" href="#" class="option">Home</a></li>
        <li><a id="nav2" href="#" class="option">Books</a></li>
        <li><a id="nav3" href="#" class="option">Orders</a></li>
        <li><a id="nav4" href="/mainPage" class="option">Logout</a></li>
        <li><a id="nav5" href="#" class="option">About-Us</a></li>
        <li><a id="nav6" href="#" class="option">Contacts</a></li>

    </ul>
    <span class="slide"></span>
</nav>
<div class="shopping">
    <a href="#"><button id="list" onclick="order()">Title</button></a>
    <button id="list" onclick="order()">Author</button></a><button id="list" onclick="order()">Price</button></a>
</div>
<div class="container" id="rev"><br>
    <div class="img1"  id="To Kill a mockingbir" >
        <img src="/Css/classic.jpg">
        <div class="bodyBook">
            <h2>To Kill a mockingbird</h2>
            <h2>HARPER LEE <br>
                Classic books
            </h2>
            <h2 class="price">$375</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="The Help">
        <img src="/Css/history.jpg">
        <div class="bodyBook">
            <h2>
                 The Help</h2><h2>
                 KATHREN STOCKETT <br>
                 History books
            </h2>
            <h2 class="price">$220</h2><br>
            <button class="btn">Add To Cart</button>
        </div>

    </div><br>
    <div class="img1" id="Me Elton Jhon">
        <img src="/Css/biographie.jpg">
        <div class="bodyBook">
            <h2>
                Me Elton Jhon</h2><h2>
                ELTON JHON <br>
                Biography books
            </h2>
            <h2 class="price">$100</h2><br>
            <button class="btn">Add To Cart</button>
        </div>

    </div><br>
    <div class="img1" id="The walking dead"><img src="/Css/commic.jpg">
        <div class="bodyBook">
            <h2>
                The walking dead</h2><h2>
                One Compondium <br>
                Comic books
            </h2>
            <h2 class="price">$1000</h2><br>
            <button class="btn">Add To Cart</button>
        </div>

    </div><br>
    <div class="img1" id="The Code"><img src="/Css/cook.jpg">
        <div class="bodyBook">
            <h2>
                The Code</h2><h2>
                Femmima <br>
                Cooking books
            </h2>
            <h2 class="price">$75</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="The Night FIRE"><img src="/Css/detective.jpg">
        <div class="bodyBook">
            <h2>
                The Night FIRE</h2><h2>
                MICHAEL CONNELY <br>
                detective books
            </h2>
            <h2 class="price">$600</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="Notes of a native son"><img src="/Css/essays.jpg">
        <div class="bodyBook">
            <h2>
                Notes of a native son</h2> <h2>
                JAMES BALDWIN <br>
                Essays books
            </h2>
            <h2 class="price">$20</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="The water dancer"><img src="/Css/fantazy.jpg">
        <div class="bodyBook">
            <h2>
                The water dancer</h2> <h2>
                Orpha's book club <br>
                Fantasy books
            </h2>
            <h2 class="price">$150</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="Alive, Again"><img src="/Css/fiction.jpg">
        <div class="bodyBook">
            <h2>
                Alive, Again</h2> <h2>
                 ELIZABETH STROUT <br>
                 Fiction books
            </h2>
            <h2 class="price">$50</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="CARRIE"><img src="/Css/horror.jpg">
        <div class="bodyBook">
            <h2>CARRIE</h2> <h2>
            STEVEN KING <br>
            Horror books
            </h2>
            <h2 class="price">$100</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="Born a Crime"><img src="/Css/memoir.jpg">
        <div class="bodyBook">
            <h2>
             Born a Crime</h2><h2>
            TREVOR NOAH<br>
                 Memoir books
            </h2>
            <h2 class="price">$200</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="The collected poems"><img src="/Css/poetry.jpg">
        <div class="bodyBook">
            <h2>
             The collected poems</h2> <h2>
            SELVIA PLATH <br>
              Poetry books
            </h2>
            <h2 class="price">$150</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="The Savior"><img src="/Css/rommance.jpg">
        <div class="bodyBook">
            <h2>
                The Savior</h2><h2>
               J.R WARD <br>
                Romance books
            </h2>
            <h2 class="price">$250</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="The hunger games trilogy"><img src="/Css/science%20fiction.jpg">
        <div class="bodyBook">
            <h2>
               The hunger games trilogy</h2> <h2>
            SUZANN COLLINS <br>
             Science fiction books
            </h2>
            <h2 class="price">$340</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="Dare to Lead"><img src="/Css/self%20help.jpg">
        <div class="bodyBook">
            <h2>
               Dare to Lead</h2><h2>
            BRENE BROWN <br>
              Self help books
            </h2>
            <h2 class="price">$300</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="Black future months"><img src="/Css/short%20stories.jpg">
        <div class="bodyBook">
            <h2>
                Black future months</h2> <h2>
            N.K JEMISIN <br>
            Short stories books
            </h2>
            <h2 class="price">$350</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="Catch and Kill"><img src="/Css/true%20crime.jpg">
        <div class="bodyBook">
            <h2>
                Catch and Kill</h2> <h2>
                RONAN FERROW <br>
                Crime books
            </h2>
            <h2 class="price">$450</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div><br>
    <div class="img1" id="The Guardians"><img src="/Css/suspense.jpg">
        <div class="bodyBook">
            <h2>
                 The Guardians</h2>
            <h2> JHON GRISHAM <br>
                Suspense books
            </h2>
            <h2 class="price">$400</h2><br>
            <button class="btn">Add To Cart</button>
        </div>
    </div>

</div><br>r

<div class="myCart">
<table class="tableau">
    <thead>
    <tr>
        <th ></th>
        <th ><h3>ITEM</h3></th>
        <th ></th>
        <th ><h3>PRICE</h3></th>
        <th ><h3>BOOKS QUANTITY</h3></th>
        <th ><h3>TOTAL</h3></th>

    </tr>
    </thead>
    <tbody>
    <tr>
        <td><input  type="checkbox"></td>
        <td><img  src="/Css/cook.jpg" width="40" alt=""></td>
        <td >
            <h3 >The code</h3>
        </td>
        <td  class="item-price"><h3>$100</h3></td>
        <td id="quantite"><input type = 'number' class = 'num' value = '1'></td>
        <td class="total-price"><h3>$100</h3></td>
        <td><button id="delete" class="supp" type="button">Remove</button></td>
    </tr>


    </tbody>
    <tr>
        <td><input  type="checkbox"></td>
        <td><img   width="40" alt=""></td>
        <td >
            <h3 class = "item-name"><strong>Grand-Total</strong></h3>
        </td>
        <td ><h3></h3></td>
        <td ><h3></h3></td>
        <td class="grand-total" ><h3><strong>$0</strong></h3></td>

    </tr>
</table>
</div>
<div class="shopping">

    <a href="/Html/mycard.html"><button type="submit" id="shop" >CHECK CART!!</button></a>
    <a href="#"><button type="submit" id="contin">CONTINUE SHOPPING!!</button></a>

</div>


<script>


    let addToCartButtons = document.getElementsByClassName('btn');
    let cartContainer = document.getElementsByTagName('tbody')[0];
    let quantityFields = document.getElementsByClassName('num');
    let delete_buttons = document.getElementsByClassName('supp');
    let list_Button = document.getElementsByClassName('lister');

    for(let i = 0; i < addToCartButtons.length; i++){
        addToCartButtons[i].addEventListener('click', addToCart);
    }
    function addToCart(event){


        let itemContainer = document.createElement('tr')
        let btn = event.target
        let btnGrandParent = btn.parentElement.parentElement
        let btnParent = btn.parentElement
        let itemImage = btnGrandParent.children[0].src
        let itemName = btnParent.children[0].innerText
        let itemPrice = btnParent.children[2].innerText


        itemContainer.innerHTML = `
    <td><input class="uk-checkbox" type="checkbox"></td>
    <td><img class="uk-preserve-width uk-border-circle" src=${itemImage} width="40" alt=""></td>
    <td class="uk-table-link">
        <h3 class = "item-name">${itemName}</h3>
    </td>
    <td ><h3>${itemPrice}</h3></td>
    <td><input type = 'number' class = 'num' style="position: relative;
    left: 80px;" value = '1'></td>
    <td class="total-price"><h3>${itemPrice}</h3></td>
    <td><button  class="supp" style="width: 80px;height: 50px;background-color: blue;cursor: pointer;" type="button" >Remove</button></td>
`

        cartContainer.append(itemContainer)




        // Accessing individual quantity fields
        for(let i = 0; i < quantityFields.length; i++){
            quantityFields[i].value = 1
            quantityFields[i].addEventListener('change', totalCost)

        }

        // Accessing individual quantity fields
        for(let i = 0; i < delete_buttons.length; i++){
            delete_buttons[i].addEventListener('click', removeItem)
        }

        grandTotal();
    }
    function totalCost(event){
        let quantity = event.target
        quantity_parent = quantity.parentElement.parentElement
        price_field = quantity_parent.getElementsByClassName('item-price')[0]
        total_field = quantity_parent.getElementsByClassName('total-price')[0]
        price_field_content = price_field.innerText.replace('$', '')
        total_field.children[0].innerText = '$' +  quantity.value * price_field_content
        grandTotal();
        if(isNaN(quantity.value)|| quantity.value <= 0){
            quantity.value = 1
        }};
    function grandTotal(){
        let total = 0
        let grand_total = document.getElementsByClassName('grand-total')[0]
        all_total_fields = document.getElementsByClassName('total-price')
        for(let i = 0; i < all_total_fields.length; i++){
            all_prices = Number(all_total_fields[i].innerText.replace('$', ''))
            total+=all_prices
        }
        grand_total.children[0].innerText = "$"+total
        grand_total.children[0].style.fontWeight = 'bold'
        console.log(total)
    }


    function removeItem(event){
        del_btn = event.target
        del_btn_parent = del_btn.parentElement.parentElement
        del_btn_parent.remove()
        console.log(del_btn)
        grandTotal();

    }

    function order() {
        var mylist = document.getElementById('rev');
        var divs = mylist.getElementsByClassName('img1');
        var listitems = [];
        for (i = 0; i < divs.length; i++) {
            listitems.push(divs.item(i));
        }
        listitems.sort(function(a, b) {
            var compA = a.getAttribute('id').toUpperCase();
            var compB = b.getAttribute('id').toUpperCase();
            return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;
        });
        mylist.innerHTML = "";
        for (i = 0; i < listitems.length; i++) {
            mylist.appendChild(listitems[i]);
        }
    }
</script>
</body>
</html>